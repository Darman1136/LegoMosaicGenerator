# LegoMosaicGenerator
This is a lego moasic generator written in Java 11 using OpenCV 4.3.0. 

It'll generate moasics using 1x1 plates for 16x16, 32x32 and 48x48 base plates and outputs a XML with brick usage, ready for import at https://www.bricklink.com  
It can be fed any image (.jpg, .png), though an image which is square in dimensions obviously works best.

The generated mosaics will be saved to "pathToResultDirectory", the XML for import will be printed to console.

## Usage
For Windows, download [LegoMosaicGenerator.zip](build/LegoMosaicGenerator.zip) (compiled with java 11), extract and run via command line:  
<code>java -jar .\LegoMosaicGenerator.jar C:\pathToImage\image.jpg C:\pathToResultDirectory</code>  
For Linux you need to provide the OpenCV libraries yourself.

## Example (Lenna)
BrickLink imports:  
16x16: 
```xml
<INVENTORY><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>96</COLOR><MINQTY>1</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>225</COLOR><MINQTY>37</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>2</COLOR><MINQTY>11</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>99</COLOR><MINQTY>1</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>227</COLOR><MINQTY>3</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>71</COLOR><MINQTY>3</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>8</COLOR><MINQTY>9</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>106</COLOR><MINQTY>7</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>13</COLOR><MINQTY>1</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>49</COLOR><MINQTY>1</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>84</COLOR><MINQTY>27</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>21</COLOR><MINQTY>1</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>150</COLOR><MINQTY>4</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>54</COLOR><MINQTY>2</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>86</COLOR><MINQTY>1</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>24</COLOR><MINQTY>12</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>25</COLOR><MINQTY>32</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>90</COLOR><MINQTY>2</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>58</COLOR><MINQTY>27</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>26</COLOR><MINQTY>10</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>28</COLOR><MINQTY>50</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>61</COLOR><MINQTY>12</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>94</COLOR><MINQTY>2</MINQTY></ITEM></INVENTORY>
```
32x32: 
```xml
<INVENTORY><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>2</COLOR><MINQTY>41</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>71</COLOR><MINQTY>6</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>8</COLOR><MINQTY>88</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>77</COLOR><MINQTY>1</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>13</COLOR><MINQTY>10</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>84</COLOR><MINQTY>90</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>21</COLOR><MINQTY>3</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>22</COLOR><MINQTY>3</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>150</COLOR><MINQTY>8</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>86</COLOR><MINQTY>2</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>24</COLOR><MINQTY>41</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>25</COLOR><MINQTY>153</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>90</COLOR><MINQTY>16</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>26</COLOR><MINQTY>41</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>28</COLOR><MINQTY>162</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>94</COLOR><MINQTY>11</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>95</COLOR><MINQTY>3</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>96</COLOR><MINQTY>6</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>225</COLOR><MINQTY>146</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>99</COLOR><MINQTY>10</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>227</COLOR><MINQTY>14</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>106</COLOR><MINQTY>20</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>46</COLOR><MINQTY>2</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>47</COLOR><MINQTY>3</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>49</COLOR><MINQTY>4</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>54</COLOR><MINQTY>11</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>58</COLOR><MINQTY>73</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>61</COLOR><MINQTY>56</MINQTY></ITEM></INVENTORY>
```
48x48:
```xml
<INVENTORY><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>2</COLOR><MINQTY>107</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>66</COLOR><MINQTY>5</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>69</COLOR><MINQTY>3</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>71</COLOR><MINQTY>17</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>8</COLOR><MINQTY>304</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>77</COLOR><MINQTY>6</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>13</COLOR><MINQTY>11</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>18</COLOR><MINQTY>1</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>84</COLOR><MINQTY>177</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>21</COLOR><MINQTY>6</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>22</COLOR><MINQTY>13</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>150</COLOR><MINQTY>22</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>86</COLOR><MINQTY>5</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>24</COLOR><MINQTY>94</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>25</COLOR><MINQTY>384</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>90</COLOR><MINQTY>54</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>26</COLOR><MINQTY>118</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>28</COLOR><MINQTY>437</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>94</COLOR><MINQTY>28</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>95</COLOR><MINQTY>5</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>96</COLOR><MINQTY>18</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>225</COLOR><MINQTY>438</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>99</COLOR><MINQTY>18</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>227</COLOR><MINQTY>41</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>164</COLOR><MINQTY>3</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>106</COLOR><MINQTY>43</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>46</COLOR><MINQTY>10</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>47</COLOR><MINQTY>10</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>49</COLOR><MINQTY>14</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>51</COLOR><MINQTY>3</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>54</COLOR><MINQTY>23</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>58</COLOR><MINQTY>133</MINQTY></ITEM><ITEM><ITEMTYPE>P</ITEMTYPE><ITEMID>3024</ITEMID><COLOR>61</COLOR><MINQTY>153</MINQTY></ITEM></INVENTORY>
```

<img src="/image/lenna.png" width="240"> <img src="/image/16.jpg" alt="16x16" width="240"> <img src="/image/32.jpg" alt="32x32" width="240"> <img src="/image/48.jpg" alt="48x48" width="240">

## To do
* Only use colors that are actually available for the selected brick type. Currently all available lego colors are used to create the mosaic, regardless of availability
* Option to disable glow or transparent bricks
* Option to select between 1x1 stud, plate square or plate round
